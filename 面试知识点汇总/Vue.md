# Vue

## key的作用

- 问题：在v-for中，为什么要指定key？如果不指定会造成什么结果？

key的作用是在VDOM比较过程中标记可以复用的结点，而开发者显示提供一个unique的key是为了避免“就地复用”给“有状态组件”带来的副作用（一般是状态没有得到更新）。如果开发者不指定key，VDOM为了提高效率会采取“就地复用”策略（尽量全部复用旧结点，避免创建/销毁多个组件的开销），这与提供`index`作为key的效果是一样的，只适合无状态组件，不推荐。

参考：[第 1 题：写 React / Vue 项目时为什么要在列表组件中写 key，其作用是什么？](https://github.com/Advanced-Frontend/Daily-Interview-Question/issues/1)

## 事件委托

- 问题：如果v-for的每个item都绑定了事件，为什么Vue不会处理成事件委托？

首先，事件委托的作用/优点有：

- 不必手动给新增的子元素绑定事件
- 只定义了一个回调函数，更省内存

而Vue中，的确是不会处理成事件委托的，而是保留开发者的做法，理由与上述观点一一对应：

- v-for配合事件绑定，开发者只需要书写一次，新增的子元素也不必再写一次来绑定事件
- 虽然给N个子元素监听了事件，但回调是同一个函数。所以只要不是多个函数，其实内存消耗也差不多
- 更自由：开发者可以自行选择是事件绑定还是事件委托。如果是委托，则可能需要开发者额外保存数据，来保证在回调中能辨识是哪一个子元素

参考：[Is event delegation necessary?](https://forum.vuejs.org/t/is-event-delegation-necessary/3701/4)

## Vue SSR


